## 8. NAPI √úZENETEK (PUSH NOTIFICATIONS)

### 8.1 Push Notification Enged√©ly K√©r√©s

**Trigger:**

- PWA telep√≠t√©s ut√°n 1-2 nap
- Vagy manu√°lisan a Be√°ll√≠t√°sokban

**Flow:**

- Native browser prompt
- OneSignal subscription

**CRUD:**

```sql
UPDATE User
SET push_enabled = true,
    push_subscription_id = ?
WHERE id = ?
```

### 8.2 √úzenet K√ºld√©s (Cron Job)

**Trigger:** Naponta 8:00 (Vercel Cron)

**Query (Prismic CMS):**

```
GET DailyMessage
WHERE scheduled_date = TODAY AND sent = false
LIMIT 1
```

**Logic:**

```
IF user.plan = 'PREMIUM' AND user.push_enabled:
  Send push notification
  
UPDATE DailyMessage
SET sent = true
WHERE id = ?
```

**Push Content:**

- Title: "Mai √ºzeneted üí´"
- Body: Message text
- Click action: Open app

### 8.3 Notification History (optional)

**Output:**

- Utols√≥ 30 √ºzenet list√°ja
- Csak Premium usereknek

---
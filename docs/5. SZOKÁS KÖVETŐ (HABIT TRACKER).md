## 5. SZOK√ÅS K√ñVET≈ê (HABIT TRACKER)

### 5.1 Szok√°s L√©trehoz√°sa

**Input:**

- C√≠m (pl: "Reggeli fut√°s")
- Le√≠r√°s (optional)
- Gyakoris√°g: "Minden nap" vagy "H√©tk√∂znap"
- Start d√°tum (default: ma)
- Icon v√°laszt√°s (el≈ëre defini√°lt ikonok)

**Feature Gate:**

- Ingyenes: max 1 akt√≠v szok√°s
- Premium: max 10 akt√≠v szok√°s

**CRUD:**

```sql
CREATE Habit {
  id, user_id, title, description?,
  frequency ('daily' | 'weekday'),
  icon, start_date, active (boolean),
  created_at
}
```

### 5.2 Szok√°s Teljes√≠t√©se (Check-in)

**Input:**

- Habit ID
- Date (default: ma)
- Note (optional, textarea)

**Valid√°ci√≥:**

- Ugyanarra a napra csak 1x checkin

**CRUD:**

```sql
CREATE HabitCompletion {
  id, habit_id, completed_date, note?,
  created_at
}
```

**Output:**

- Konfetti anim√°ci√≥ üéâ
- Streak update
- "Mai szok√°sok" lista friss√ºl

### 5.3 Szok√°sok List√°ja (Dashboard)

**Output:**

- Akt√≠v szok√°sok
- Mindegyikhez:
    - C√≠m, icon
    - Mai st√°tusz: ‚úÖ Teljes√≠tve / ‚≠ï Nem teljes√≠tve
    - Streak: "5 napos sorozat! üî•"
    - Checkbox (ha ma m√©g nincs check-in)

**Query:**

```sql
SELECT h.*, 
  COUNT(hc.id) as total_completions,
  MAX(hc.completed_date) as last_completion
FROM Habit h
LEFT JOIN HabitCompletion hc ON h.id = hc.habit_id
WHERE h.user_id = ? AND h.active = true
GROUP BY h.id
```

### 5.4 Szok√°s Statisztik√°k

**Input:** Habit ID

**Output:**

- Calendar view (utols√≥ 90 nap)
    - Z√∂ld: teljes√≠tve
    - Sz√ºrke: nem teljes√≠tve
- √ñsszesen X/Y nap teljes√≠tve
- Longest streak
- Current streak

### 5.5 Szok√°s Szerkeszt√©se/T√∂rl√©se

**CRUD:**

```sql
UPDATE Habit
SET title, description, frequency, active
WHERE id = ? AND user_id = ?

DELETE Habit (cascade delete HabitCompletions)
WHERE id = ? AND user_id = ?
```

---
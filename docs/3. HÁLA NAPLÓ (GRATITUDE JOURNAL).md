## 3. HÁLA NAPLÓ (GRATITUDE JOURNAL)

### 3.1 Új Bejegyzés Létrehozása

**Input:**

- Dátum (default: ma)
- 3 hála téma (textarea, min 10 karakter each)
- Napi reflekció (optional, textarea)
- Mood slider (1-5, emoji-kkal)

**Validáció:**

- Ingyenes user: max 3 bejegyzés/hét
- Premium user: unlimited

**CRUD:**

```sql
CREATE JournalEntry {
  id, user_id, date, 
  gratitude_1, gratitude_2, gratitude_3,
  reflection?, mood (1-5),
  created_at
}
```

**Output:**

- Sikeres mentés konfirmáció
- Visszairányítás journal listára

### 3.2 Bejegyzések Listázása

**Input:**

- User ID
- Date range filter (optional)

**Output:**

- Lista (legújabb elöl)
- Minden bejegyzéshez:
    - Dátum
    - Mood emoji
    - Első 100 karakter a gratitude_1-ből
    - "Részletek" gomb

**CRUD:**

```sql
READ JournalEntry
WHERE user_id = current_user
ORDER BY date DESC
LIMIT/OFFSET for pagination
```

### 3.3 Bejegyzés Megtekintése

**Input:** Journal Entry ID

**Output:**

- Teljes bejegyzés megjelenítése
- Edit gomb
- Delete gomb

### 3.4 Bejegyzés Szerkesztése

**Input:**

- Journal Entry ID
- Updated fields (same as create)

**Validáció:**

- Csak saját bejegyzést szerkesztheti

**CRUD:**

```sql
UPDATE JournalEntry
SET gratitude_1, gratitude_2, gratitude_3, reflection, mood
WHERE id = ? AND user_id = current_user
```

### 3.5 Bejegyzés Törlése

**Input:** Journal Entry ID

**Confirmation:** "Biztosan törlöd?"

**CRUD:**

```sql
DELETE JournalEntry
WHERE id = ? AND user_id = current_user
```

### 3.6 Statisztikák (Dashboard)

**Output:**

- Összesen X bejegyzés
- Idei hét streak (hány napon írtál)
- Átlagos mood (1-5)
- Mood chart (utolsó 30 nap)

**Query:**

```sql
SELECT 
  COUNT(*) as total_entries,
  AVG(mood) as avg_mood,
  date, mood
FROM JournalEntry
WHERE user_id = ? AND date >= DATE_SUB(NOW(), INTERVAL 30 DAY)
GROUP BY date
ORDER BY date
```

---
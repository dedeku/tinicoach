## 6. KÖZÖSSÉGI SZAVAZÁS (COMMUNITY VOTING)

### 6.1 Aktív Kérdés Megjelenítése

**Input:** Current date

**Query:**

```sql
SELECT * FROM CommunityQuestion
WHERE active_from <= NOW() AND active_to >= NOW()
LIMIT 1
```

**Output (Prismic CMS):**

- Kérdés szövege
- 3-4 válaszlehetőség
- "Szavazz" gomb

### 6.2 Szavazás

**Input:**

- Question ID
- Selected option (string)

**Validáció:**

- User csak 1x szavazhat kérdésenként

**CRUD:**

```sql
CREATE Vote {
  id, user_id, question_id,
  selected_option, voted_at
}

UNIQUE INDEX (user_id, question_id)
```

**Output:**

- Eredmények megjelenítése (bar chart)
- "Köszönjük a szavazatod!"

### 6.3 Eredmények Megtekintése

**Query:**

```sql
SELECT selected_option, COUNT(*) as vote_count
FROM Vote
WHERE question_id = ?
GROUP BY selected_option
```

**Output:**

- Option 1: 45% (123 szavazat)
- Option 2: 35% (96 szavazat)
- Option 3: 20% (55 szavazat)

---